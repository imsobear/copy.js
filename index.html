<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Copy.js : copy by js !" />

    <link rel="stylesheet" media="screen" href="stylesheets/stylesheet.css">
    <link rel="stylesheet" href="./src/copy.css">
    <style>
        .copy-content {
            margin-bottom: 10px;
        }
        .main-code {
            max-width: 640px;
            padding: 20px 10px;
            margin: 0 auto;
        }
        .code-item p {
            background-color: #fff;
            padding: 10px;
        }
    </style>
    <script src="http://cdn.staticfile.org/html5shiv/r29/html5.min.js"></script>
    <title>Copy.js</title>
  </head>
  <body>

    <div id="header_wrap" class="outer">
        <header class="inner">
            <a id="forkme_banner" href="https://github.com/tomayday/copy.js">View on GitHub</a>
            <h1 id="project_title">Copy.js</h1>
        </header>
    </div>

    <div id="main_content_wrap" class="outer">
        <section id="main_content" class="inner">
            <h2>DEMO:</h2>
            <ul>
                <li class="copy-content">Hover on me and see what happend！</li>
                <li class="copy-content">Just Test</li>
                <li class="copy-content">Copy.js maintained by sobear</li>
                <li class="copy-content">How to copy to the clipboard in JavaScript?</li>
            </ul>
        </section>

        <section class="main-code">
            <h2><a href="https://github.com/tomayday/copy.js/blob/master/src/copy.js" target="_blank">源码分析</a>：</h2>
                <ul>
                    <li class="code-item">
                        <h4>1. 如何选中文字：</h4>
                        <pre>
    function selectText (element) {
        var text = element,
            range,
            selection;

        if (body.createTextRange) {
            // IE
            range = body.createTextRange();
            range.moveToElementText(text);
            range.select();
        } else if (window.getSelection) {
            // Others
            selection = window.getSelection();
            range = doc.createRange();
            range.selectNodeContents(text);
            selection.removeAllRanges();
            selection.addRange(range);
        } else {
            return false;
        }
    }
                        </pre>
                    </li>
                    <li class="code-item">
                        <h4>2. 监听 ctrl + c 键盘事件：</h4>
                        <pre>
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey && e.keyCode === 67) {
                // 按下ctrl +c 
            };
        });
                        </pre>
                    </li>
                    <li class="code-item">
                        <h4>3. 复制文字：</h4>
                        <pre>因为安全问题，除IE以外的浏览器禁止用JS复制内容到剪切板，目前的解决方案都是<strong>flash</strong>.</pre>
                    </li>
                    <li class="code-item">
                        <h4>附：属性选择器</h4>
                        <p>对于 icon 类的标签，我们再也不需要对其加一个对于icon的公用类名，只需要类名是以 icon- 开头就可以匹配所有 icon.</p>
                        <pre>
                            // 以前要这样写
                            &ltul class="list">
                                &ltli class="item item1">item1&lt/li>
                                &ltli class="item item2">item2&lt/li>
                                &ltli class="item item3">item3&lt/li>
                            &lt/ul>
                            .item {
                                /*公用样式*/
                            }
                            item1 {
                                /*私有样式*/
                            }
                        </pre>
                        <pre style="margin-top:20px;">
                            // 现在只要这样写：
                            &ltul class="list">
                                &ltli class="item1">item1&lt/li>
                                &ltli class="item2">item2&lt/li>
                                &ltli class="item3">item3&lt/li>
                            &lt/ul>
                            [class^="item-"] {
                                /*公用样式*/
                            }
                            [class="item-1"] {
                                /*私有样式*/
                            }
                        </pre>
                    </li>
                </ul>   
        </section>
    </div>

    <div id="footer_wrap" class="outer">
        <footer class="inner">
            <p class="copyright">Copy.js maintained by sobear</p>
            <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
        </footer>
    </div>
    
    <script src="./src/copy.js"></script>
    <script>
        if (!Array.prototype.indexOf) {
            Array.prototype.indexOf = function (obj, fromIndex) {
                var index = fromIndex || 0;
                for(var i = index, l = this.length; i < l; i++) {
                    if (this[i] == obj) {
                        return i;
                    }
                }
                return -1;
            };
        }

        function getElementsByClassName(name, parent) {
          var parent = parent || document;
          if (document.getElementsByClassName) {
            return parent.getElementsByClassName(name);
          }
          
          var allElems = parent.getElementsByTagName('*'),
              result = [];
          for (var i = 0, l = allElems.length; i < l; i++) {
            var elem = allElems[i];
            if (~elem.className.split().indexOf(name)) {
              result.push(elem);
            }
          }
          return result;
        }

        function addEventListener (elem, type, func) {
          if (elem.addEventListener) {
            elem.addEventListener(type, func, false);
          } else {
            elem.attachEvent('on' + type, func);
          }
          return;
        }

        var ps = getElementsByClassName('copy-content');

        for (var i = 0, l = ps.length; i < l; i++) {
            var p = ps[i];
            addEventListener(p, 'mouseenter', function (e) {
                var self = e.target || window.event.srcElement;
                copy.selectText(self);
            });
            addEventListener(p, 'mouseleave', function (e) {
                var self = e.target || window.event.srcElement;
                copy.cancleSelected(self);
            });
        }
    </script>
  </body>
</html>
